# ansible-tutorial

```

ansible all -m apt -a update_cache=true --become --ask-become-pass
ansible all -m apt -a name=vim-nox --become --ask-become-pass
ansible all -m apt -a name=tmux --become --ask-become-pass
ansible all -m apt -a name=vim-nox --become --ask-become-pass
ansible all -m apt -a name=snapd --become --ask-become-pass
ansible all -m apt -a "name=snapd state=latest" --become --ask-become-pass
ansible all -m apt -a "upgrade=dist" --become --ask-become-pass
ansible all -m ansible.builtin.gather_facts --limit 192.168.77.141 | grep ansible_distribution
ansible-playbook --ask-become-pass remove_apache.yml
ansible-playbook --ask-become-pass install_apache.yml

systemctl status httpd
sudo systemctl start httpd
sudo firewall -cmd --add-port=80/tcp
sudo firewall-cmd --add-port=80/tcp
sudo firewall-cmd --remove-port=80/tcp
sudo systemctl stop httpd
 ```

 ![alt text](image.png)

 ![alt text](image-1.png)

 ![alt text](image-2.png)

 ````
 ansible-tutorial git:(main) ✗ ansible-playbook --ask-become-pass install_apache.yml
BECOME password:

PLAY [all] *************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.139]
ok: [192.168.77.140]
ok: [192.168.77.131]
ok: [192.168.77.141]

TASK [update apt repository - Ubuntu] **********************************************************************************************************************************************************************
skipping: [192.168.77.141]
changed: [192.168.77.140]
changed: [192.168.77.131]
changed: [192.168.77.139]

TASK [install apache2 package - Ubuntu] ********************************************************************************************************************************************************************
skipping: [192.168.77.141]
ok: [192.168.77.140]
ok: [192.168.77.139]
ok: [192.168.77.131]

TASK [add PHP support for apache2 - Ubuntu] ****************************************************************************************************************************************************************
skipping: [192.168.77.141]
ok: [192.168.77.140]
ok: [192.168.77.139]
ok: [192.168.77.131]

TASK [update apt repository - CentOS] **********************************************************************************************************************************************************************
skipping: [192.168.77.131]
skipping: [192.168.77.139]
skipping: [192.168.77.140]
ok: [192.168.77.141]

TASK [install apache2_mod_proxy - CentOS] ******************************************************************************************************************************************************************
skipping: [192.168.77.131]
skipping: [192.168.77.139]
skipping: [192.168.77.140]
changed: [192.168.77.141]

TASK [add PHP support for apache2 - CentOS] ****************************************************************************************************************************************************************
skipping: [192.168.77.131]
skipping: [192.168.77.139]
skipping: [192.168.77.140]
changed: [192.168.77.141]

PLAY RECAP *************************************************************************************************************************************************************************************************
192.168.77.131             : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0
192.168.77.139             : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0
192.168.77.140             : ok=4    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0
192.168.77.141             : ok=4    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0
```

![alt text](image-3.png)


````
➜  ansible-tutorial git:(main) ✗ ansible-playbook --ask-become-pass site.yml
BECOME password:

PLAY [all] *************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.139]
ok: [192.168.77.140]
ok: [192.168.77.131]
ok: [192.168.77.141]

TASK [install updates (CentOS)] ****************************************************************************************************************************************************************************
skipping: [192.168.77.131]
skipping: [192.168.77.139]
skipping: [192.168.77.140]
ok: [192.168.77.141]

TASK [install updates (Ubuntu)] ****************************************************************************************************************************************************************************
skipping: [192.168.77.141]
ok: [192.168.77.140]
ok: [192.168.77.139]
ok: [192.168.77.131]

PLAY [web_servers] *****************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.131]
ok: [192.168.77.141]

TASK [install apache and php for Ubuntu servers] ***********************************************************************************************************************************************************
skipping: [192.168.77.141]
changed: [192.168.77.131]

TASK [install apache and php for CentOS servers] ***********************************************************************************************************************************************************
skipping: [192.168.77.131]
changed: [192.168.77.141]

TASK [Enable service to start on boot up - CentOS] *********************************************************************************************************************************************************
skipping: [192.168.77.131]
changed: [192.168.77.141]

TASK [Create firewall rule for apache service - CentOS] ****************************************************************************************************************************************************
skipping: [192.168.77.131]
changed: [192.168.77.141]

PLAY RECAP *************************************************************************************************************************************************************************************************
192.168.77.131             : ok=4    changed=1    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0
192.168.77.139             : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0
192.168.77.140             : ok=2    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0
192.168.77.141             : ok=6    changed=3    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0
```

````
➜  ansible-tutorial git:(main) ✗ ansible-playbook --ask-become-pass site.yml --tags centos
BECOME password:

PLAY [all] *************************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.139]
ok: [192.168.77.140]
ok: [192.168.77.131]
ok: [192.168.77.141]

TASK [install updates (CentOS)] ****************************************************************************************************************************************************************************
skipping: [192.168.77.131]
skipping: [192.168.77.139]
skipping: [192.168.77.140]
ok: [192.168.77.141]

TASK [install updates (Ubuntu)] ****************************************************************************************************************************************************************************
skipping: [192.168.77.141]
ok: [192.168.77.140]
ok: [192.168.77.139]
ok: [192.168.77.131]

PLAY [web_servers] *****************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.131]
ok: [192.168.77.141]

TASK [install apache and php for CentOS servers] ***********************************************************************************************************************************************************
skipping: [192.168.77.131]
ok: [192.168.77.141]

TASK [Enable service to start on boot up - CentOS] *********************************************************************************************************************************************************
skipping: [192.168.77.131]
ok: [192.168.77.141]

TASK [Create firewall rule for apache service - CentOS] ****************************************************************************************************************************************************
skipping: [192.168.77.131]
ok: [192.168.77.141]

PLAY [db_servers] ******************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.139]

TASK [install mariadb package (CentOS)] ********************************************************************************************************************************************************************
skipping: [192.168.77.139]

TASK [ensure mariadb is running] ***************************************************************************************************************************************************************************
ok: [192.168.77.139]

TASK [checking service status] *****************************************************************************************************************************************************************************
changed: [192.168.77.139]

PLAY [file_servers] ****************************************************************************************************************************************************************************************

TASK [Gathering Facts] *************************************************************************************************************************************************************************************
ok: [192.168.77.140]

PLAY RECAP *************************************************************************************************************************************************************************************************
192.168.77.131             : ok=3    changed=0    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0
192.168.77.139             : ok=5    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0
192.168.77.140             : ok=3    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0
192.168.77.141             : ok=6    changed=0    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0
```

https://www.learnlinux.tv/getting-started-with-ansible-10-tags/